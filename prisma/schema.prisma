generator client {
  provider = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model User {
    id  Int @id @default(autoincrement())
    twitterUserName String @unique
    balances Balance[]
    tipTweets TipTweet[]
}

enum TipStatus {
    New
    Executed
    Error
}

model TipTweet {
   id  Int @id @default(autoincrement())
   created DateTime @updatedAt
   user User @relation(fields: [userId], references: [id])
   userId Int
   tweetId String
   message String
   status TipStatus @default(New)
   lastError String? @db.Text
}

model Balance {
    id Int @id @default(autoincrement())
    user User @relation(fields: [userId], references: [id])
    userId Int
    quantity String
    tokenId Int
    @@unique([userId, tokenId])
}

model Token {
    id Int @id @default(autoincrement())
    tokenChainId String @unique
    tokenTicker String
    tokenDecimals Int
}
